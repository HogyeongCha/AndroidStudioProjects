프로젝트 중간 정리 보고서: (가칭) 탄소 발자국 스캔 앱
1. 프로젝트 개요
프로젝트명: (가칭) 바코드 스캔을 통한 상품 탄소 발자국 계산 및 친환경 소비 유도 앱

핵심 목표: 사용자가 스마트폰으로 상품 바코드를 스캔하면, 해당 상품의 탄소 발자국 정보를 직관적인 점수와 비교 데이터로 제공하여 친환경적인 소비 선택을 돕는다.

주요 기술 스택:

App: Android Native (Java & XML), MVVM 아키텍처, Single-Activity 구조

Barcode Scanning: Google ML Kit Barcode Scanning API

Database: Google Firebase Firestore

Data Processing: Python (Pandas), Google Colab

AI Feature (예정): Google Gemini API

2. 현재까지의 진행 상황 요약 (Phase 1 완료)
가. 안드로이드 앱 MVP 핵심 기능 구현 완료
화면 구조 설계: 단일 액티비티(MainActivity)와 다중 프래그먼트(ScanFragment, ResultFragment) 구조를 Jetpack Navigation Component로 구현하여 안정적인 화면 전환 로직을 완성했습니다.

바코드 스캔 기능: CameraX 라이브러리를 연동하여 실시간 카메라 미리보기를 구현하고, ML Kit을 통해 바코드를 성공적으로 인식 및 디코딩하는 기능을 완성했습니다.

MVVM 아키텍처 구축: ResultViewModel과 ProductRepository를 구현하여 UI 로직과 데이터 처리 로직을 명확하게 분리했습니다. 이를 통해 Firestore와의 비동기 데이터 통신을 체계적으로 관리합니다.

데이터 시각화: Firestore에서 조회한 상품의 탄소 점수와 카테고리 평균 점수를 비교하여, ProgressBar와 TextView 등을 통해 직관적으로 보여주는 결과 화면 UI를 완성했습니다.

나. 데이터베이스 스키마 설계 및 연동 완료
Firestore 스키마 설계: 상품 정보를 저장할 products 컬렉션과 카테고리별 평균 점수를 저장할 category_averages 컬렉션의 데이터 구조 설계를 완료했습니다.

Firestore 연동: 안드로이드 앱에 Firebase SDK를 연동하고, ProductRepository를 통해 Firestore 데이터베이스에 비동기적으로 데이터를 요청하고 수신하는 파이프라인을 성공적으로 구축했습니다.

3. 프로젝트 중단 사유: 데이터 파이프라인 구축의 복잡성 증대
Phase 2인 '데이터베이스 확장' 단계에서, Open Food Facts의 대용량 데이터를 처리하여 Firestore에 업로드하는 과정 중 다음과 같은 현실적인 문제들에 직면했습니다.

1. 외부 데이터 소스의 불안정성:

초기에 참조했던 데이터셋의 URL 및 파일 형식(.tsv)이 변경되어 .csv 형식으로 대체하는 과정이 필요했습니다.

데이터셋의 컬럼(헤더) 구성이 예고 없이 변경되어, 당초 계획했던 한국어(_ko) 컬럼 대신 표준 영어 컬럼을 사용하는 방식으로 코드를 수정해야 했습니다. 이는 외부 데이터에 의존하는 프로젝트의 본질적인 리스크를 확인하는 계기가 되었습니다.

2. 개발 환경의 리소스 한계:

메모리 문제: Google Colab의 무료 런타임 환경에서 수백만 개의 데이터를 포함하는 전체 데이터셋을 한 번에 메모리로 불러올 때, RAM 부족으로 인한 '런타임 종료' 현상이 발생했습니다.

해결 과정: 이 문제를 해결하기 위해 데이터를 chunksize 옵션을 통해 작은 덩어리로 나누어 처리하는 방식으로 코드를 전면 재구성했습니다.

3. 클라우드 서비스의 사용량 제한(Quota):

시간 초과 문제: 가공된 데이터를 Firestore에 한 번에 너무 많이(5만 개) 쓰려고 시도했을 때, DeadlineExceeded 오류가 발생했습니다. 이를 해결하기 위해 Firestore의 배치 쓰기 한도인 500개 미만으로 작업을 잘게 나누는 로직을 추가했습니다.

무료 등급 할당량 초과: 최종적으로 Firestore의 무료 등급에서 제공하는 일일 쓰기 작업 할당량을 모두 소진하여 ResourceExhausted 오류가 발생했습니다. 이는 대규모 데이터 이전 작업 시 당연히 발생할 수 있는 문제이며, 속도 제어(time.sleep)와 작업 일정을 분할하는 전략이 필요함을 확인했습니다.

이러한 문제들은 코드의 오류라기보다는, 실제 대용량 데이터를 다루는 파이프라인을 구축할 때 필연적으로 마주하게 되는 현실적인 장벽들입니다. 이 문제들을 해결하기 위해 더 많은 시간과 자원을 투입하기보다, 현재까지 완성된 MVP의 성과를 기록하고 잠시 중단하는 것이 더 효율적인 선택이라고 판단했습니다.

4. 재시작을 위한 제언
나중에 이 프로젝트를 다시 시작할 때, 다음의 사항들을 먼저 고려하면 큰 도움이 될 것입니다.

데이터 소스 재검토: Open Food Facts의 데이터 덤프(dump) 파일 대신, 더 안정적인 공식 API가 있는지 확인해보는 것을 추천합니다. API는 데이터 구조가 일관적이고 필요한 데이터만 선택적으로 가져올 수 있어 더 안정적일 수 있습니다.

초기 데이터셋 축소: 처음부터 수백만 개의 데이터를 처리하기보다, 하나의 특정 카테고리(예: '유제품') 데이터만으로 Firestore를 구축하여 앱의 핵심 기능(Gemini API 연동 등)을 먼저 완성하는 것이 좋습니다. 작은 성공을 먼저 이룬 뒤 데이터 규모를 점진적으로 확장하는 전략이 효과적입니다.

전문 데이터 파이프라인 도구 고려: 만약 더 큰 규모로 프로젝트를 확장한다면, Colab 스크립트 대신 Google Cloud Functions나 Cloud Dataflow 같은 서버리스 도구를 사용하여 데이터 수집 및 처리 파이프라인을 자동화하는 방안을 고려해볼 수 있습니다.

여기까지의 여정은 결코 실패가 아니며, 아이디어를 실제 작동하는 MVP로 만들고 대용량 데이터 처리의 현실적인 문제까지 깊이 경험해 본 매우 가치 있는 과정이었습니다. 이 기록이 미래의 우리에게 훌륭한 나침반이 되어주길 바랍니다.